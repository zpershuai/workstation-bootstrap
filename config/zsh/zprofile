# Login shell config (primary settings).

# Load local secrets if present.
if [[ -f "${HOME}/.config/secrets/env" ]]; then
  source "${HOME}/.config/secrets/env"
fi

# Oh My Zsh config (managed by .zprofile).
export ZSH="${HOME}/.oh-my-zsh"
ZSH_THEME="ys"
plugins=(autojump macos zsh-autosuggestions zsh-syntax-highlighting)
if [[ -f "${ZSH}/oh-my-zsh.sh" ]]; then
  source "${ZSH}/oh-my-zsh.sh"
fi

# Homebrew shell env (Apple Silicon default path).
if [[ -x "/opt/homebrew/bin/brew" ]]; then
  eval "$(/opt/homebrew/bin/brew shellenv)"
fi

# autojump (Homebrew install)
if [[ -f "/opt/homebrew/etc/profile.d/autojump.sh" ]]; then
  source "/opt/homebrew/etc/profile.d/autojump.sh"
fi

# dotfiles bin
export PATH="${HOME}/.dotfiles/bin:${PATH}"

# tmux: auto-attach when using SSH
if [[ -z "${TMUX:-}" && -n "${SSH_CONNECTION:-}" ]]; then
  "${HOME}/.dotfiles/bin/tmwork"
fi

# aliases
alias cat="bat"
alias tmatt="tmux att -t"
alias tmls="tmux ls"
alias tmnew="tmux new-session -s"
alias tmkill="tmux kill-session -t"
alias vim="nvim"
alias ls="${HOME}/.dotfiles/bin/ls"

export VISUAL="nvim"
export EDITOR="nvim"
export LESSCHARSET="utf-8"

# Add user-local bin paths.
export PATH="${HOME}/.local/bin:${PATH}"

# bun completions
if [[ -s "${HOME}/.bun/_bun" ]]; then
  source "${HOME}/.bun/_bun"
fi

# bun
export BUN_INSTALL="${HOME}/.bun"
export PATH="${BUN_INSTALL}/bin:${PATH}"

# Local env bootstrap if present.
if [[ -f "${HOME}/.local/bin/env" ]]; then
  . "${HOME}/.local/bin/env"
fi

alias claude-mem='${HOME}/.bun/bin/bun "${HOME}/.claude/plugins/marketplaces/thedotmack/plugin/scripts/worker-service.cjs"'
